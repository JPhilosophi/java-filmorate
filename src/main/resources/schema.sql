CREATE TABLE IF NOT EXISTS FILMS
(
    ID           INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME         VARCHAR(32)  NOT NULL,
    DESCRIPTION  VARCHAR(512) NOT NULL,
    RELEASE_DATE TIMESTAMP,
    DURATION     INTEGER,
    RATE         INTEGER,
    MPA_RATING    INTEGER      NOT NULL references FILM_RATING (ID)
);

CREATE TABLE IF NOT EXISTS FILM_GENRES
(
    ID      INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FILM_ID INTEGER REFERENCES FILM (ID),
    GENRE_ID INTEGER REFERENCES GENRE (ID)
);

CREATE TABLE IF NOT EXISTS GENRE
(
    ID      INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR NOT NULL
);

CREATE TABLE IF NOT EXISTS FILM_RATING
(
    ID          INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MPA_RATING  VARCHAR(8)   NOT NULL,
    DESCRIPTION VARCHAR(128) NOT NULL
);

CREATE TABLE IF NOT EXISTS USERS
(
    ID       INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    LOGIN    VARCHAR(16) NOT NULL,
    NAME     VARCHAR(32),
    BIRTHDAY DATE,
    EMAIL    VARCHAR(32)
);

CREATE TABLE IF NOT EXISTS FILM_LIKES
(
    ID      INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FILM_ID INTEGER references FILM (ID),
    USER_ID INTEGER references USERS (ID)
);

CREATE TABLE IF NOT EXISTS FRIENDS
(
    ID        INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    USER_ID   INTEGER references USERS (ID),
    FRIEND_ID INTEGER references USERS (ID),
    STATUS    INTEGER
);
